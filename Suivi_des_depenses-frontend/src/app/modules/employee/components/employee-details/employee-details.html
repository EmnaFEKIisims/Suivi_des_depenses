<div class="container mt-4">
  <div class="d-flex justify-content-between mb-4">
    <button class="btn btn-outline-secondary" (click)="navigateTo('/employees')">
      <i class="bi bi-arrow-left"></i> Back to Employees
    </button>
    <button class="btn btn-outline-primary" (click)="navigateTo('/home')">
      <i class="bi bi-house"></i> Home
    </button>
  </div>

  <div class="card shadow-lg">
    <div class="card-header bg-primary text-white">
      <div class="d-flex justify-content-between align-items-center">
        <h3 class="mb-0">Employee Details</h3>
        <button class="btn btn-light btn-sm" (click)="navigateToEdit()">
          <i class="bi bi-pencil-square"></i> Edit
        </button>
      </div>
    </div>
    <div class="card-body">
      <!-- Row 1: Reference + Status -->
      <div class="row mb-3 border-bottom pb-3">
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Reference</label>
            <p class="mb-0">{{ employee?.reference }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Status</label>
            <span class="badge" [ngClass]="{
              'bg-success': employee?.status === 'Actif',
              'bg-warning': employee?.status === 'Inactif'
            }">
              {{ employee?.status }}
            </span>
          </div>
        </div>
      </div>

      <!-- Row 2: CIN + Full Name -->
      <div class="row mb-3 border-bottom pb-3">
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">CIN</label>
            <p class="mb-0">{{ employee?.cin }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Full Name</label>
            <p class="mb-0">{{ employee?.fullName }}</p>
          </div>
        </div>
      </div>

      <!-- Row 3: Gender + Birth Date -->
      <div class="row mb-3 border-bottom pb-3">
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Gender</label>
            <p class="mb-0">{{ employee?.gender }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Birth Date</label>
            <p class="mb-0">{{ employee?.birthDate | date:'mediumDate' }} (Age: {{ calculateAge(employee?.birthDate) }})</p>
          </div>
        </div>
      </div>

      <!-- Row 4: Department + Occupation -->
      <div class="row mb-3 border-bottom pb-3">
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Department</label>
            <p class="mb-0">{{ employee?.department }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Occupation</label>
            <p class="mb-0">{{ employee?.occupation }}</p>
          </div>
        </div>
      </div>

      <!-- Row 5: Email + Phone -->
      <div class="row mb-3 border-bottom pb-3">
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Email</label>
            <p class="mb-0">{{ employee?.email }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Phone</label>
            <p class="mb-0">{{ employee?.phoneNumber }}</p>
          </div>
        </div>
      </div>


      <!-- Row 6: Hire Address -->
      <div class="row mb-3 border-bottom pb-3">
        <div class="col-md-12">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Address</label>
            <p class="mb-0">{{ employee?.address }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted"></label>
            <p class="mb-0"></p>
          </div>
        </div>

      </div>


      <!-- Row 7: Hire Date + Exit Date -->
      <div class="row mb-3 border-bottom pb-3">
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Hire Date</label>
            <p class="mb-0">{{ employee?.hireDate | date:'mediumDate' }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Exit Date</label>
            <p class="mb-0">{{ employee?.exitDate ? (employee?.exitDate | date:'mediumDate') : 'N/A' }}</p>
          </div>
        </div>
      </div>

      <!-- Row 8: Username + Password -->
      <div class="row">
        <div class="col-md-6">
          <div class="d-flex justify-content-between">
            <label class="form-label fw-bold text-muted">Username</label>
            <p class="mb-0">{{ employee?.username }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="d-flex justify-content-between align-items-center">
            <label class="form-label fw-bold text-muted">Password</label>
            <div class="input-group" style="width: auto;">
              <input [type]="showPassword ? 'text' : 'password'" class="form-control form-control-sm" [value]="employee?.password" readonly>
              <button class="btn btn-outline-secondary btn-sm" type="button" (click)="togglePasswordVisibility()">
                <i class="bi" [class.bi-eye]="!showPassword" [class.bi-eye-slash]="showPassword"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>